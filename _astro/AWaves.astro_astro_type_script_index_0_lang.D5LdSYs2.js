import{E as v}from"./Emitter.C33kwsam.js";class r{constructor(s,t,i){this.x=s,this.y=t,this.z=i}dot2(s,t){return this.x*s+this.y*t}}class w{constructor(s=0){this.grad3=[new r(1,1,0),new r(-1,1,0),new r(1,-1,0),new r(-1,-1,0),new r(1,0,1),new r(-1,0,1),new r(1,0,-1),new r(-1,0,-1),new r(0,1,1),new r(0,-1,1),new r(0,1,-1),new r(0,-1,-1)],this.p=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],this.perm=new Array(512),this.gradP=new Array(512),this.seed(s)}seed(s){s>0&&s<1&&(s*=65536),s=Math.floor(s),s<256&&(s|=s<<8);for(let t=0;t<256;t++){let i;t&1?i=this.p[t]^s&255:i=this.p[t]^s>>8&255,this.perm[t]=this.perm[t+256]=i,this.gradP[t]=this.gradP[t+256]=this.grad3[i%12]}}fade(s){return s*s*s*(s*(s*6-15)+10)}lerp(s,t,i){return(1-i)*s+i*t}perlin2(s,t){let i=Math.floor(s),h=Math.floor(t);s-=i,t-=h,i=i&255,h=h&255;const o=this.gradP[i+this.perm[h]].dot2(s,t),a=this.gradP[i+this.perm[h+1]].dot2(s,t-1),e=this.gradP[i+1+this.perm[h]].dot2(s-1,t),u=this.gradP[i+1+this.perm[h+1]].dot2(s-1,t-1),n=this.fade(s);return this.lerp(this.lerp(o,e,n),this.lerp(a,u,n),this.fade(t))}}class m extends HTMLElement{svg;lines;paths;noise;mouse;bounding;isInteractive;isPaused;connectedCallback(){this.svg=this.querySelector(".js-svg"),this.mouse={x:-10,y:0,lx:0,ly:0,sx:0,sy:0,v:0,vs:0,a:0,set:!1},this.lines=[],this.paths=[],this.noise=new w(Math.random()),this.isInteractive=!0,this.isPaused=!0,this.setSize(),this.setLines(),this.bindEvents()}bindEvents(){v.on("mousemove",this.onMouseMove,this),v.on("resize",this.onResize,this),this.addEventListener("touchmove",this.onTouchMove.bind(this),{passive:!1});const s=this.closest("[data-intersect]");s&&s.addEventListener("intersect",this.onIntersect.bind(this),{passive:!0}),v.on("tick",this.tick,this),this.isPaused=!1}onResize(){this.setSize(),this.setLines()}onMouseMove(s,t){this.updateMousePosition(s,t)}onTouchMove(s){s.preventDefault();const t=s.touches[0];this.updateMousePosition(t.clientX,t.clientY)}updateMousePosition(s,t){const{mouse:i}=this;i.x=s-this.bounding.left,i.y=t-this.bounding.top+window.scrollY,i.set||(i.sx=i.x,i.sy=i.y,i.lx=i.x,i.ly=i.y,i.set=!0)}onIntersect(s){this.isPaused=!s.detail.isIntersecting,this.isPaused?v.off("tick",this.tick,this):v.on("tick",this.tick,this)}setSize(){const s=this.getBoundingClientRect();this.svg.style.width="",this.svg.style.height="",this.bounding={left:s.left,top:s.top+window.scrollY,width:this.clientWidth,height:this.clientHeight},this.svg.style.width=`${this.bounding.width}px`,this.svg.style.height=`${this.bounding.height}px`}setLines(){const{width:s,height:t}=this.bounding;this.lines=[],this.paths.forEach(n=>n.remove()),this.paths=[];const i=10,h=22,o=Math.ceil((s+200)/i),a=Math.ceil((t+50)/h),e=(s-i*o)/2,u=(t-h*a)/2;for(let n=0;n<=o;n++){const d=[];for(let l=0;l<=a;l++)d.push({x:e+i*n,y:u+h*l,wave:{x:0,y:0},cursor:{x:0,y:0,vx:0,vy:0}});const c=document.createElementNS("http://www.w3.org/2000/svg","path");c.classList.add("c-waves__line"),this.svg.appendChild(c),this.paths.push(c),this.lines.push(d)}this.isPaused&&this.drawLines()}movePoints(s){const{lines:t,mouse:i,noise:h}=this;t.forEach((o,a)=>{o.forEach((e,u)=>{const n=h.perlin2((e.x+s*.012)*.0025,(e.y+s*.006)*.002)*12;if(e.wave.x=Math.cos(n)*32,e.wave.y=Math.sin(n)*16,this.isInteractive){const d=e.x-i.sx,c=e.y-i.sy,l=Math.hypot(d,c),y=Math.max(175,i.vs*1.5);if(l<y){const g=1-l/y,f=Math.cos(l*.001)*g;e.cursor.vx+=Math.cos(i.a)*f*y*i.vs*65e-5,e.cursor.vy+=Math.sin(i.a)*f*y*i.vs*65e-5}e.cursor.vx+=(0-e.cursor.x)*.005,e.cursor.vy+=(0-e.cursor.y)*.005,e.cursor.vx*=.925,e.cursor.vy*=.925,e.cursor.x+=e.cursor.vx*2,e.cursor.y+=e.cursor.vy*2,e.cursor.x=Math.min(100,Math.max(-100,e.cursor.x)),e.cursor.y=Math.min(100,Math.max(-100,e.cursor.y))}})})}moved(s,t=!0){return{x:Math.round((s.x+s.wave.x+(t?s.cursor.x:0))*10)/10,y:Math.round((s.y+s.wave.y+(t?s.cursor.y:0))*10)/10}}drawLines(){const{lines:s,paths:t}=this;s.forEach((i,h)=>{let o=this.moved(i[0],!1),a=`M ${o.x} ${o.y}`;i.forEach((e,u)=>{const n=u===0,d=u===i.length-1,c=this.moved(e,!n&&!d);a+=` L ${c.x} ${c.y}`}),t[h].setAttribute("d",a)})}tick(s){if(this.isPaused)return;const{mouse:t}=this;t.sx+=(t.x-t.sx)*.08,t.sy+=(t.y-t.sy)*.08;const i=t.x-t.lx,h=t.y-t.ly,o=Math.hypot(i,h);t.v=o,t.vs+=(o-t.vs)*.12,t.vs=Math.min(120,t.vs),t.lx=t.x,t.ly=t.y,t.a=Math.atan2(h,i),this.movePoints(s),this.drawLines()}}customElements.define("a-waves",m);
